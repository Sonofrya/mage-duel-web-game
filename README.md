# Mage Game - –ú–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –∫–∞—Ä—Ç–æ—á–Ω–∞—è –∏–≥—Ä–∞

## –û–ø–∏—Å–∞–Ω–∏–µ
Mage Game - —ç—Ç–æ –º–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –∫–∞—Ä—Ç–æ—á–Ω–∞—è –∏–≥—Ä–∞ —Å WebSocket –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–µ–∂–¥—É –∏–≥—Ä–æ–∫–∞–º–∏.

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- üéÆ –ú–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –∏–≥—Ä–∞ –¥–æ 2 –∏–≥—Ä–æ–∫–æ–≤
- ‚ö° WebSocket –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
- üé® –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π UI —Å –∞–Ω–∏–º–∞—Ü–∏—è–º–∏
- üë• –°–∏—Å—Ç–µ–º–∞ –∫–æ–º–Ω–∞—Ç –∏ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π
- üé≠ –í—ã–±–æ—Ä –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
- üì± –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- PHP 7.4 –∏–ª–∏ –≤—ã—à–µ
- PostgreSQL 12 –∏–ª–∏ –≤—ã—à–µ
- Composer
- –í–µ–±-—Å–µ—Ä–≤–µ—Ä (Apache/Nginx) –∏–ª–∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π PHP —Å–µ—Ä–≤–µ—Ä

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
```bash
git clone <repository-url>
cd magegame
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
composer install
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ PostgreSQL
2. –°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `admin` —Å –ø–∞—Ä–æ–ª–µ–º `1`:
```sql
CREATE USER admin WITH PASSWORD '1';
ALTER USER admin CREATEDB;
```
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
```bash
start_database.bat
```

### 4. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

#### –ó–∞–ø—É—Å–∫ WebSocket —Å–µ—Ä–≤–µ—Ä–∞
```bash
start_server.bat
```
–∏–ª–∏
```bash
php server.php
```

#### –ó–∞–ø—É—Å–∫ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞
```bash
php -S localhost:8000
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
magegame/
‚îú‚îÄ‚îÄ backimg/              # –§–æ–Ω–æ–≤—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ char_icons/           # –ò–∫–æ–Ω–∫–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
‚îú‚îÄ‚îÄ demo-cards/           # –î–µ–º–æ –∫–∞—Ä—Ç—ã
‚îú‚îÄ‚îÄ fonts/                # –®—Ä–∏—Ñ—Ç—ã
‚îú‚îÄ‚îÄ images/               # –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞—Ä—Ç
‚îú‚îÄ‚îÄ js/                   # JavaScript —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ markers/              # –ú–∞—Ä–∫–µ—Ä—ã —Å—Ç–∞—Ç—É—Å–∞
‚îú‚îÄ‚îÄ style/                # CSS —Å—Ç–∏–ª–∏
‚îú‚îÄ‚îÄ vendor/               # Composer –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ *.php                 # PHP —Å–∫—Ä–∏–ø—Ç—ã
‚îú‚îÄ‚îÄ *.html                # HTML —Å—Ç—Ä–∞–Ω–∏—Ü—ã
‚îú‚îÄ‚îÄ server.php            # WebSocket —Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ db.php                # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ë–î
‚îú‚îÄ‚îÄ setup_database.sql    # SQL —Å–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ë–î
‚îî‚îÄ‚îÄ README.md             # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## API Endpoints

### –ö–æ–º–Ω–∞—Ç—ã
- `GET get_rooms.php` - –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∫–æ–º–Ω–∞—Ç
- `POST create_room.php` - –°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É
- `POST join_room.php` - –í–æ–π—Ç–∏ –≤ –∫–æ–º–Ω–∞—Ç—É
- `POST leave_room.php` - –ü–æ–∫–∏–Ω—É—Ç—å –∫–æ–º–Ω–∞—Ç—É

### –ò–≥—Ä–æ–∫–∏
- `POST update_character.php` - –û–±–Ω–æ–≤–∏—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
- `POST update_ready_status.php` - –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
- `GET get_room_info.php` - –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–º–Ω–∞—Ç–µ

### –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
- `POST send_invite.php` - –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ
- `GET check_invitations.php` - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è

## WebSocket Events

### –ö–ª–∏–µ–Ω—Ç -> –°–µ—Ä–≤–µ—Ä
- `joinRoom` - –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –∫–æ–º–Ω–∞—Ç–µ
- `leaveRoom` - –ü–æ–∫–∏–Ω—É—Ç—å –∫–æ–º–Ω–∞—Ç—É
- `playerReady` - –ò–≥—Ä–æ–∫ –≥–æ—Ç–æ–≤
- `gameAction` - –î–µ–π—Å—Ç–≤–∏–µ –≤ –∏–≥—Ä–µ
- `timer` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞

### –°–µ—Ä–≤–µ—Ä -> –ö–ª–∏–µ–Ω—Ç
- `playerJoined` - –ò–≥—Ä–æ–∫ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è
- `playerLeft` - –ò–≥—Ä–æ–∫ –ø–æ–∫–∏–Ω—É–ª –∫–æ–º–Ω–∞—Ç—É
- `playerReady` - –ò–≥—Ä–æ–∫ –≥–æ—Ç–æ–≤
- `startPhase2` - –ù–∞—á–∞–ª–æ –≤—Ç–æ—Ä–æ–π —Ñ–∞–∑—ã
- `gameAction` - –î–µ–π—Å—Ç–≤–∏–µ –≤ –∏–≥—Ä–µ
- `timer` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (db.php)
```php
$config = [
    'host' => 'localhost',
    'dbname' => 'mydatabase',
    'username' => 'admin',
    'password' => '1',
    'port' => 5432
];
```

### WebSocket —Å–µ—Ä–≤–µ—Ä (server.php)
```php
$config = [
    'host' => '0.0.0.0',
    'port' => 8080,
    'max_connections' => 1000
];
```

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
1. –°–æ–∑–¥–∞–π—Ç–µ PHP endpoint –¥–ª—è API
2. –î–æ–±–∞–≤—å—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π JavaScript –∫–æ–¥
3. –û–±–Ω–æ–≤–∏—Ç–µ WebSocket –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
4. –î–æ–±–∞–≤—å—Ç–µ CSS —Å—Ç–∏–ª–∏ –¥–ª—è UI

### –û—Ç–ª–∞–¥–∫–∞
- –õ–æ–≥–∏ WebSocket —Å–µ—Ä–≤–µ—Ä–∞ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å
- –û—à–∏–±–∫–∏ PHP –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ error_log.txt
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ JavaScript

## –õ–∏—Ü–µ–Ω–∑–∏—è
–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª–µ–π.

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞
–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –æ—à–∏–±–æ–∫
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ WebSocket —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω
